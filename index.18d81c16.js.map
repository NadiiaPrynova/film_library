{"mappings":"AAAA,IAAMA,SAAW,CACbC,UAAWC,SAASC,cAAc,kBAClCC,QAASF,SAASC,cAAc,kBAE9BE,SAAW,CACdC,OAAQ,6DACTC,KAAM,aACNC,MAAO,kBACPC,KAAM,SAEJC,KAAO,EAEX,SAASC,aAELC,aADAF,MAAQ,GAEHG,MAAK,SAACC,GACHd,SAASC,UAAUc,mBAAmB,YAAaC,aAAaF,EAAKG,UACjEH,EAAKJ,MAAQI,EAAKI,aAClBlB,SAASI,QAAQe,UAAUC,QAAQ,YAAa,mB,IAGvDC,OAAM,SAACC,GACRtB,SAASI,QAAQe,UAAUC,QAAQ,YAAa,mB,IAIxD,SAASJ,aAAaO,GAClB,OAAOA,EAAIC,KAAI,SAAAC,G,IAAGC,EAAWD,EAAXC,YAAaC,EAAYF,EAAZE,aAAcC,EAAcH,EAAdG,eAAgBC,EAAYJ,EAAZI,a,MAE3D,4CAKYC,OAHVJ,EACM,4BAA8BA,EAC9BrB,SAASC,OACd,WAEKwB,OAFIF,GAAkBvB,SAASG,MAAM,oDAGxBsB,OADbF,GAAkBvB,SAASG,MAAM,oCAEpBsB,OADAH,GAAgBtB,SAASE,KAAK,mCACAuB,OAA9BD,GAAgBxB,SAASI,KAAK,gC,IAE7CsB,KAAK,G,CAMjB,SAASnB,e,IAAaoB,EAAAC,UAAAC,OAAA,YAAAD,UAAA,GAAiBA,UAAA,GAAH,IAC1BE,EAAS,IAAIC,gBAAgB,CAC/B1B,KAAMsB,EACNK,QAAS,qCAGb,OADAC,QAAQC,IAAIJ,EAAOK,YACZC,MAAM,oDAA2DX,OAAPK,IAC5DtB,MAAK,SAAC6B,GACH,IAAKA,EAAKC,GACN,MAAM,IAAIC,MAAM,SAEpB,OAAOF,EAAKG,M,IA9CxB7C,SAASI,QAAQ0C,iBAAiB,QAASnC,YAoD3CC,eACKC,MAAK,SAAAC,GACFwB,QAAQC,IAAIzB,GACZd,SAASC,UAAUc,mBAAmB,YAAaC,aAAaF,EAAKG,UACjEH,EAAKJ,KAAOI,EAAKI,aACjBlB,SAASI,QAAQe,UAAUC,QAAQ,mBAAoB,Y,IAG9DC,OAAM,SAACC,GACJtB,SAASI,QAAQe,UAAUC,QAAQ,YAAa,mB","sources":["src/index.js"],"sourcesContent":["const elements = {\n    container: document.querySelector('.js-movie-list'),\n    loadBtn: document.querySelector('.js-load-more')\n}\nconst defaults = {\n   poster: \"https://www.reelviews.net/resources/img/default_poster.jpg\",\n  date: \"XXXX-XX-XX\",\n  title: \"Title not found\",\n  vote: \"XX.XX\", \n}\nlet page = 1;\nelements.loadBtn.addEventListener('click', onLoadMore)\nfunction onLoadMore() {\n    page += 1;\n    serviceFilms(page)\n        .then((data) => {\n            elements.container.insertAdjacentHTML(\"beforeend\", createMarkup(data.results));\n            if (data.page >= data.total_pages) {\n                elements.loadBtn.classList.replace(\"load-more\", \"load-more-hidden\")\n            }\n        })\n        .catch((err) => {\n        elements.loadBtn.classList.replace(\"load-more\", \"load-more-hidden\")\n    })\n}\n\nfunction createMarkup(arr) {\n    return arr.map(({ poster_path, release_date, original_title, vote_average\n\n}) => `<li class=\"movie-card\">\n      <img src=\"${\n        poster_path\n            ? \"//image.tmdb.org/t/p/w300\" + poster_path\n            : defaults.poster\n        }\" alt=\"${original_title || defaults.title}\">\n      <div class=\"movie-info\">\n        <h2>${original_title || defaults.title}</h2>\n        <p>Release Date: ${release_date || defaults.date}</p>\n        <p>Vote Average: ${vote_average || defaults.vote}</p>\n      </div>\n    </li>`).join('')\n     \n}\n\n\n\nfunction serviceFilms(currentPage = '1') {\n    const params = new URLSearchParams({\n        page: currentPage,\n        api_key: '345007f9ab440e5b86cef51be6397df1'\n    })\n    console.log(params.toString());\n    return fetch(`https://api.themoviedb.org/3/trending/movie/week?${params}`)\n        .then((resp) => {\n            if (!resp.ok) {\n                throw new Error(\"Error\");\n            }\n            return resp.json();\n            \n        });\n    // fetch(`https://api.themoviedb.org/3/trending/movie/week?api_key=345007f9ab440e5b86cef51be6397df1&page=${page}`)\n}\n\nserviceFilms()\n    .then(data => {\n        console.log(data);\n        elements.container.insertAdjacentHTML('beforeend', createMarkup(data.results));\n        if (data.page < data.total_pages) {\n            elements.loadBtn.classList.replace('load-more-hidden', 'load-more')\n        }\n    })\n    .catch((err) => {\n        elements.loadBtn.classList.replace(\"load-more\", \"load-more-hidden\")\n        })\n// with ERROR\n// serviceFilms(2).then(\n//     (data) => {\n//         if ('success' in data && data.success === false) {\n//             throw new Error(data.status_message)\n//         }\n//         console.log(data);\n//     }\n// )\n//     .catch((err) => console.log(err));"],"names":["elements","container","document","querySelector","loadBtn","defaults","poster","date","title","vote","page","onLoadMore","serviceFilms","then","data","insertAdjacentHTML","createMarkup","results","total_pages","classList","replace","catch","err","arr","map","param","poster_path","release_date","original_title","vote_average","concat","join","currentPage","arguments","length","params","URLSearchParams","api_key","console","log","toString","fetch","resp","ok","Error","json","addEventListener"],"version":3,"file":"index.18d81c16.js.map"}